extends dashboard 

block main
  style.

    #deleteBtnWrapper {
      position: relative;
    }

    #deletePopup {
      display: none;
      position: absolute;
      top: -40px;
      left: 40px;
      padding: 20px;
      border: 1px solid black;
      background-color: white;
      z-index: 1;
    }

  - const formatDate = d => [d.getDate().toString().padStart(2, '0'), (d.getMonth() + 1).toString().padStart(2, '0'), d.getFullYear()].join('-')

  div(class='title') Faktura VAT nr: #{invoice.invoiceNumber}/#{month}/#{year}
  div(class='divider')

  div(class='flexContainer')
    div(class='col')
      div(class='alignedInputGroup autoWidth')
        div(class='marginBottom-sm')
          strong Nabywca:
        ul(class='marginBottom-md')
          li #{invoice.buyer.businessName}
          li #{invoice.buyer.nip}
          li #{invoice.buyer.adress}
          li #{invoice.buyer.areaCode} #{invoice.buyer.city}
    div(class='col')
      div(class='alignedInputGroup')
        div(class='marginBottom-sm')
          strong Data wystawienia:
        div #{formatDate(invoice.dateCreated)}
      div(class='alignedInputGroup')
        div(class='marginBottom-sm')
          strong Data sprzedaży:
        div #{formatDate(invoice.transactionDate)}
      div(class='alignedInputGroup')
        div(class='marginBottom-sm') Termin płatności:
        div #{formatDate(invoice.paymentDue)}
      div(class='alignedInputGroup')
        div(class='marginBottom-sm') Miejsce wystawienia faktury:
        div #{invoice.issuePlace}

  //- table
    thead 
      tr 
        th Nazwa towaru lub usługi 
        th GTU 
        th Ilość
        th Jednostka 
        th Cena jedn. #{invoice.priceType}
        th Wartość #{invoice.priceType}
        th VAT
      each item in invoice.invoiceItems
        tr
          td #{item.itemName}
          td #{item.gtu}
          td #{item.itemQuantity}
          td #{item.unit}
          td #{formatPrice(item.singleItemPrice)}
          td #{formatPrice(item.itemQuantity * item.singleItemPrice)}
          td #{item.taxRate * 100}%

  h3 Podsumowanie faktury: 
  ul 
    li Razem netto: 
    li #{formatPrice(invoice.totals.netTotal)} zł
    li VAT: 
    li #{formatPrice(invoice.totals.taxTotal)} zł
    li Razem brutto: 
    li #{formatPrice(invoice.totals.grossTotal)} zł

  p Zapłacono PLN: #{formatPrice(invoice.paid)}

  input(type="button" onclick=`window.location='/faktury/${invoice._id}/edytuj'` value="Edytuj")

  input(type="button" onclick=`window.location='/faktury/${invoice._id}/pdf'` value="Zapisz PDF")

  div(id="deleteBtnWrapper")
    button(id="deleteBtn" onclick="showDeletePopup()") Usuń
    div(id="deletePopup")
      p Czy na pewno chcesz usunąć?
      form(action=`/faktury/${year}/${month}/${invoice._id}/usun` method='POST')
        input(type="button" value="Nie" onclick="this.closest('#deletePopup').setAttribute('style', 'display: none')")
        input(type="submit" value="Tak")
  script. 
    function showDeletePopup() {document.getElementById("deletePopup").setAttribute('style', 'display: block')}